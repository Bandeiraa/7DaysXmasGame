[gd_scene load_steps=8 format=2]

[ext_resource path="res://Sprites/Goblin/GoblinLeftSheet.png" type="Texture" id=1]
[ext_resource path="res://Scripts/Goblin.gd" type="Script" id=2]
[ext_resource path="res://Scripts/GoblinDamageArea.gd" type="Script" id=3]
[ext_resource path="res://Sprites/Goblin/GoblinRightSheet.png" type="Texture" id=5]

[sub_resource type="RectangleShape2D" id=1]
extents = Vector2( 29.7588, 20.1222 )

[sub_resource type="Animation" id=2]
resource_name = "LeftAnim"
length = 0.8
tracks/0/type = "value"
tracks/0/path = NodePath("GoblinCollision/GoblinSprite:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ ExtResource( 1 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("GoblinCollision/GoblinSprite:hframes")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 3 ]
}
tracks/2/type = "value"
tracks/2/path = NodePath("GoblinCollision/GoblinSprite:frame")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"times": PoolRealArray( 0, 0.2, 0.4, 0.6, 0.8 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ 2, 1, 0, 1, 2 ]
}
tracks/3/type = "value"
tracks/3/path = NodePath("GoblinCollision/GoblinCollider:polygon")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/keys = {
"times": PoolRealArray( 0, 0.2, 0.4, 0.6, 0.8 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ PoolVector2Array( 0.601627, 5.52166, -5.7051, 5.52166, -7.17667, 6.78301, -7.80734, 12.8795, -11.8016, 17.084, -11.8016, 24.2316, -10.1198, 27.8054, -4.44375, 29.0668, 4.38566, 29.277, 9.43104, 28.0156, 10.9026, 23.6009, 10.9026, 17.084, 16.3684, 12.0386, 16.5787, 8.25458, 5.43678, 7.62391, 5.43678, 5.94211 ), PoolVector2Array( -6.36486, -8.8242, -1.86486, -10.0742, 0.885143, -10.0742, 5.38514, -8.3242, 16.6351, -5.3242, 16.1351, -2.3242, 10.8851, 4.9258, 10.8851, 13.1758, 8.63514, 18.1758, 3.63514, 19.6758, -4.36486, 19.9258, -8.86486, 18.9258, -10.6149, 16.9258, -10.3649, 14.6758, -11.8649, 13.9258, -11.8649, 5.4258, -6.61486, -1.0742 ), PoolVector2Array( -1.11486, -18.8242, -5.61486, -17.8242, -6.86486, -14.8242, -11.6149, -3.3242, -11.3649, 6.4258, -10.1149, 8.9258, -4.36486, 11.6758, 3.88514, 11.9258, 8.63514, 10.4258, 10.6351, 5.6758, 10.1351, -3.3242, 14.3851, -5.0742, 16.6351, -10.8242, 5.13514, -17.0742 ), PoolVector2Array( -6.36486, -8.8242, -1.86486, -10.0742, 0.885143, -10.0742, 5.38514, -8.3242, 16.6351, -5.3242, 16.1351, -2.3242, 10.8851, 4.9258, 10.8851, 13.1758, 8.63514, 18.1758, 3.63514, 19.6758, -4.36486, 19.9258, -8.86486, 18.9258, -10.6149, 16.9258, -10.3649, 14.6758, -11.8649, 13.9258, -11.8649, 5.4258, -6.61486, -1.0742 ), PoolVector2Array( 0.601627, 5.52166, -5.7051, 5.52166, -7.17667, 6.78301, -7.80734, 12.8795, -11.8016, 17.084, -11.8016, 24.2316, -10.1198, 27.8054, -4.44375, 29.0668, 4.38566, 29.277, 9.43104, 28.0156, 10.9026, 23.6009, 10.9026, 17.084, 16.3684, 12.0386, 16.5787, 8.25458, 5.43678, 7.62391, 5.43678, 5.94211 ) ]
}

[sub_resource type="Animation" id=3]
resource_name = "RightAnim"
length = 0.8
tracks/0/type = "value"
tracks/0/path = NodePath("GoblinCollision/GoblinSprite:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ ExtResource( 5 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("GoblinCollision/GoblinSprite:hframes")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 3 ]
}
tracks/2/type = "value"
tracks/2/path = NodePath("GoblinCollision/GoblinSprite:frame")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"times": PoolRealArray( 0, 0.2, 0.4, 0.6, 0.8 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ 0, 1, 2, 1, 0 ]
}
tracks/3/type = "value"
tracks/3/path = NodePath("GoblinCollision/GoblinCollider:polygon")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/keys = {
"times": PoolRealArray( 0, 0.2, 0.4, 0.6, 0.8 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ PoolVector2Array( 7.30832, 4.97176, -1.98361, 5.28674, -9.70062, 8.27905, -11.748, 9.53897, -11.5905, 13.0038, -7.81074, 24.0281, -6.70831, 26.7054, -5.76337, 28.5662, -0.723682, 29.0387, 8.09576, 29.0387, 13.1354, 28.0937, 14.3954, 26.6763, 15.3403, 23.8415, 15.3403, 17.0694, 9.98565, 6.2026 ), PoolVector2Array( 5.3539, -9.87019, -0.539024, -9.02835, -1.8018, -7.48496, -12.0443, -5.80127, -12.0443, -2.43388, -6.85287, 13.9821, -5.73041, 17.0689, -3.90641, 19.3138, 0.162514, 20.1557, 9.28252, 20.1557, 13.0708, 19.0332, 15.1754, 16.9286, 16.4382, 13.7015, 16.2979, 4.30089, 12.9305, 1.35443, 10.8259, -0.750187, 8.16006, -2.29357, 10.1244, -3.69665, 11.3871, -6.08188, 11.2468, -7.76558, 10.1244, -8.88804 ), PoolVector2Array( 7.33604, -18.6768, 2.29791, -18.8536, -0.795685, -17.7929, -1.94473, -15.8484, -0.00018692, -12.1361, -7.68998, -11.8709, -12.0842, -10.2538, -8.2203, -5.77213, -6.36415, -9.0425, -2.82862, -8.15862, -5.12671, -6.56763, -6.67083, -3.63764, -6.67083, 5.87602, -5.72742, 9.21379, -3.74092, 11.0679, 0.232059, 11.9949, 8.70776, 11.9949, 12.6808, 10.803, 14.7997, 8.94893, 15.9916, 5.63811, 15.8591, -3.76463, 14.962, -5.87338, 13.2281, -7.81356, 8.30832, -11.3406, 10.2529, -13.1084, 11.3135, -15.2297, 11.043, -16.6866, 9.98769, -17.6162 ), PoolVector2Array( 5.3539, -9.87019, -0.539024, -9.02835, -1.8018, -7.48496, -12.0443, -5.80127, -12.0443, -2.43388, -6.85287, 13.9821, -5.73041, 17.0689, -3.90641, 19.3138, 0.162514, 20.1557, 9.28252, 20.1557, 13.0708, 19.0332, 15.1754, 16.9286, 16.4382, 13.7015, 16.2979, 4.30089, 12.9305, 1.35443, 10.8259, -0.750187, 8.16006, -2.29357, 10.1244, -3.69665, 11.3871, -6.08188, 11.2468, -7.76558, 10.1244, -8.88804 ), PoolVector2Array( 7.30832, 4.97176, -1.98361, 5.28674, -9.70062, 8.27905, -11.748, 9.53897, -11.5905, 13.0038, -7.81074, 24.0281, -6.70831, 26.7054, -5.76337, 28.5662, -0.723682, 29.0387, 8.09576, 29.0387, 13.1354, 28.0937, 14.3954, 26.6763, 15.3403, 23.8415, 15.3403, 17.0694, 9.98565, 6.2026 ) ]
}

[node name="Goblin" type="KinematicBody2D"]
script = ExtResource( 2 )
speed = 150

[node name="GoblinCollider" type="CollisionShape2D" parent="."]
visible = false
position = Vector2( -0.556812, 0 )
scale = Vector2( 0.5, 0.5 )
shape = SubResource( 1 )

[node name="GoblinCollision" type="Area2D" parent="."]
scale = Vector2( 0.5, 0.5 )
script = ExtResource( 3 )

[node name="GoblinSprite" type="Sprite" parent="GoblinCollision"]
texture = ExtResource( 1 )
hframes = 3
frame = 2

[node name="GoblinCollider" type="CollisionPolygon2D" parent="GoblinCollision"]
visible = false
position = Vector2( -2.13514, -8.1758 )
polygon = PoolVector2Array( 0.601627, 5.52166, -5.7051, 5.52166, -7.17667, 6.78301, -7.80734, 12.8795, -11.8016, 17.084, -11.8016, 24.2316, -10.1198, 27.8054, -4.44375, 29.0668, 4.38566, 29.277, 9.43104, 28.0156, 10.9026, 23.6009, 10.9026, 17.084, 16.3684, 12.0386, 16.5787, 8.25458, 5.43678, 7.62391, 5.43678, 5.94211 )

[node name="CannonSpawner" type="Position2D" parent="."]
position = Vector2( -1.25811, -3.01101 )

[node name="ShootCooldown" type="Timer" parent="."]
wait_time = 0.7

[node name="ChangeSceneCooldown" type="Timer" parent="."]
wait_time = 0.2

[node name="FirstShootDelay" type="Timer" parent="."]
wait_time = 1.5
one_shot = true

[node name="SlowDownTimer" type="Timer" parent="."]
wait_time = 3.0
one_shot = true

[node name="WalkAnimation" type="AnimationPlayer" parent="."]
anims/LeftAnim = SubResource( 2 )
anims/RightAnim = SubResource( 3 )
[connection signal="canGetValue" from="GoblinCollision" to="." method="canGetValue"]
[connection signal="canQueueFree" from="GoblinCollision" to="." method="canDestroy"]
[connection signal="canSlowDown" from="GoblinCollision" to="." method="onSlowDown"]
[connection signal="timeout" from="ShootCooldown" to="." method="onShootTimeout"]
[connection signal="timeout" from="ChangeSceneCooldown" to="." method="onTimerCooldown"]
[connection signal="timeout" from="FirstShootDelay" to="." method="onFirstShootTimeout"]
[connection signal="timeout" from="SlowDownTimer" to="." method="onSlowDownTimeout"]
